name: packing
on:
  release:
    types: [created]
    branches:
      - main
jobs:
    build-project:
      name: build java application
      runs-on: ubuntu-latest
      steps:
        - name: checkout Code
          uses: actions/checkout@v2
        - run: mkdir -p path/to/artifact
        - name: setup java
          uses: actions/setup-java@v2
          with:
            distribution: 'zulu'
            java-version: '11'
        - name: caching dependences
          uses: actions/cache@v2
          with:
            path: dependencies/
            key: ${{ runner.os }}-${{ steps.get-date.outputs.date }}-${{ hashFiles('**/lockfiles') }}
        - name: build code
          run: ./gradlew build --info
        - name: upload to artifacts
          uses: actions/upload-artifact@v2
          with:
            name: build
            path: path/to/artifact/build
